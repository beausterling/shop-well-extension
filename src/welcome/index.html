<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Welcome to Shop Well</title>
  <link rel="stylesheet" href="welcome.css">
</head>
<body>
  <div class="onboarding-container">
    <!-- Progress Bar -->
    <div class="progress-bar-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>

    <!-- Step 1: Welcome & Why -->
    <div class="onboarding-step active" id="step-1" data-step="1">
      <div class="step-content">
        <div class="hero-section">
          <div class="brand-image-container">
            <img src="../assets/SHOP-WELL.png" alt="Shop Well" class="hero-image">
          </div>
          <h1 class="hero-title">Welcome to Shop Well</h1>
          <p class="hero-subtitle">Shopping made safer for chronic conditions & allergies</p>
          <p class="hero-description">
            Your AI-powered companion for wellness-friendly shopping decisions on Amazon & Walmart.
            100% private, always free.
          </p>
        </div>

        <div class="supported-retailers">
          <img src="../assets/amazon-official-logo-7017516947919651epoyhkqor.png" alt="Amazon" class="retailer-logo">
          <img src="../assets/walmart-horizontal-logo-png-7017516947721005efythw47p.png" alt="Walmart" class="retailer-logo">
        </div>

        <div class="step-actions">
          <button class="btn btn-primary btn-large" id="next-step-1">
            Let's Get Started ‚Üí
            <img src="../assets/navicon2border.png" alt="" class="btn-icon">
          </button>
        </div>
      </div>
    </div>

    <!-- Step 2: Quick Setup (Chrome AI) - REDESIGNED -->
    <div class="onboarding-step" id="step-2" data-step="2">
      <div class="step-content">
        <div class="step-header">
          <div class="step-number">Step 1 of 2</div>
          <h2 class="step-title">ü§ñ Choose Your Experience</h2>
          <p class="step-description">
            Shop Well works great out of the box! Optionally enable Chrome AI for enhanced product analysis.
          </p>
        </div>

        <!-- AI Status Indicator -->
        <div class="ai-status-card" id="ai-status-card">
          <div class="status-icon" id="status-icon">
            <div class="spinner"></div>
          </div>
          <div class="status-content">
            <div class="status-title" id="status-title">Checking Chrome AI...</div>
            <div class="status-message" id="status-message">Please wait while we detect AI availability</div>
          </div>
        </div>

        <!-- Feature Comparison (always visible when AI not ready) -->
        <div class="feature-comparison">
          <div class="mode-column basic-mode">
            <div class="mode-header">
              <div class="mode-icon">üõ°Ô∏è</div>
              <h3>Basic Mode</h3>
              <p class="mode-tagline">Fast & reliable</p>
            </div>
            <ul class="mode-features">
              <li>‚úì Allergen detection</li>
              <li>‚úì Product details</li>
              <li>‚úì Instant results</li>
              <li>‚úì Zero setup</li>
            </ul>
          </div>

          <div class="mode-column ai-mode">
            <div class="mode-header">
              <div class="mode-icon">‚ú®</div>
              <h3>AI-Enhanced</h3>
              <p class="mode-tagline">Smarter analysis</p>
            </div>
            <ul class="mode-features">
              <li>‚úì All Basic Mode features</li>
              <li>‚úì Wellness recommendations</li>
              <li>‚úì Ingredient insights</li>
              <li>‚úì Smart summaries</li>
            </ul>
          </div>
        </div>

        <!-- Primary Action: Continue with Basic Mode -->
        <div class="primary-action">
          <button class="btn btn-primary btn-large" id="basic-mode-btn">
            Continue with Basic Mode ‚Üí
          </button>
          <p class="action-note">You can enable AI features later in settings</p>
        </div>

        <!-- Secondary Option: Enable AI Now (Collapsible) -->
        <div class="secondary-action">
          <button class="btn btn-link" id="toggle-instructions">
            ‚ñ∂ Show Me How to Enable AI
          </button>
        </div>

        <!-- Setup Instructions (hidden by default, expandable) -->
        <div class="setup-instructions hidden" id="setup-instructions">
          <div class="instruction-card">
            <div class="instruction-step">
              <div class="instruction-number">1</div>
              <div class="instruction-content">
                <h4>Enable Chrome AI Flags</h4>
                <p>Copy each flag name and paste into <code>chrome://flags</code>, then set to "Enabled"</p>
                <div class="flags-list">
                  <div class="flag-item">
                    <span class="flag-name">optimization-guide-on-device-model</span>
                    <button class="btn-copy-flag" data-flag="optimization-guide-on-device-model">Copy</button>
                  </div>
                  <div class="flag-item">
                    <span class="flag-name">prompt-api-for-gemini-nano</span>
                    <button class="btn-copy-flag" data-flag="prompt-api-for-gemini-nano">Copy</button>
                  </div>
                  <div class="flag-item">
                    <span class="flag-name">summarization-api-for-gemini-nano</span>
                    <button class="btn-copy-flag" data-flag="summarization-api-for-gemini-nano">Copy</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="instruction-step">
              <div class="instruction-number">2</div>
              <div class="instruction-content">
                <h4>Restart Chrome Completely</h4>
                <p>Use <strong>Cmd+Q</strong> (Mac) or fully quit Chrome on Windows/Linux. Wait 2-3 minutes for AI models to download (~2GB).</p>
              </div>
            </div>

            <div class="instruction-step">
              <div class="instruction-number">3</div>
              <div class="instruction-content">
                <h4>Check If AI is Ready</h4>
                <p>Click the button below to verify Chrome AI is enabled!</p>
                <button class="btn btn-primary" id="recheck-ai">
                  üîÑ Check AI Status
                </button>
              </div>
            </div>
          </div>

          <div class="help-note">
            <strong>üí° Tip:</strong> Check AI model download status at <code>chrome://components</code>
            under "Optimization Guide On Device Model"
          </div>
        </div>

        <div class="step-actions">
          <button class="btn btn-secondary" id="prev-step-2">‚Üê Back</button>
        </div>
      </div>
    </div>

    <!-- Step 3: Personalize -->
    <div class="onboarding-step" id="step-3" data-step="3">
      <div class="step-content">
        <div class="step-header">
          <div class="step-number">Step 2 of 2</div>
          <h2 class="step-title">‚öôÔ∏è Personalize Your Experience</h2>
          <p class="step-description">
            Tell us about your health needs so we can provide tailored wellness insights.
          </p>
        </div>

        <div class="settings-form">
          <!-- Name Input -->
          <div class="form-section">
            <label class="form-label">What is your name? (Optional)</label>
            <input type="text" id="first-name-input" class="name-input" placeholder="Your first name" maxlength="30" autocomplete="given-name">
          </div>
          <!-- Condition Selection -->
          <div class="form-section">
            <label class="form-label">Chronic Conditions (Select all that apply)</label>
            <div class="condition-selector">
              <div class="condition-option" data-condition="POTS">
                <input type="checkbox" name="condition" id="condition-pots" value="POTS">
                <label for="condition-pots">
                  <span class="condition-icon">ü©∫</span>
                  <div>
                    <span class="condition-name">POTS</span>
                    <span class="condition-desc">Postural Orthostatic Tachycardia Syndrome</span>
                  </div>
                </label>
              </div>
              <div class="condition-option" data-condition="ME/CFS">
                <input type="checkbox" name="condition" id="condition-mecfs" value="ME/CFS">
                <label for="condition-mecfs">
                  <span class="condition-icon">ü™´</span>
                  <div>
                    <span class="condition-name">ME/CFS</span>
                    <span class="condition-desc">Myalgic Encephalomyelitis / Chronic Fatigue Syndrome</span>
                  </div>
                </label>
              </div>
              <div class="condition-option" data-condition="Celiac Disease">
                <input type="checkbox" name="condition" id="condition-celiac" value="Celiac Disease">
                <label for="condition-celiac">
                  <span class="condition-icon">üåæ</span>
                  <div>
                    <span class="condition-name">Celiac Disease</span>
                    <span class="condition-desc">Gluten sensitivity & autoimmune response</span>
                  </div>
                </label>
              </div>
              <div class="condition-option" data-condition="COPD">
                <input type="checkbox" name="condition" id="condition-copd" value="COPD">
                <label for="condition-copd">
                  <span class="condition-icon">ü´Å</span>
                  <div>
                    <span class="condition-name">COPD</span>
                    <span class="condition-desc">Chronic Obstructive Pulmonary Disease</span>
                  </div>
                </label>
              </div>
              <div class="condition-option" data-condition="Arthritis">
                <input type="checkbox" name="condition" id="condition-arthritis" value="Arthritis">
                <label for="condition-arthritis">
                  <span class="condition-icon">ü¶¥</span>
                  <div>
                    <span class="condition-name">Arthritis</span>
                    <span class="condition-desc">Joint inflammation & pain management</span>
                  </div>
                </label>
              </div>
              <div class="condition-option" data-condition="Hypertension">
                <input type="checkbox" name="condition" id="condition-hypertension" value="Hypertension">
                <label for="condition-hypertension">
                  <span class="condition-icon">‚ù§Ô∏è</span>
                  <div>
                    <span class="condition-name">Hypertension</span>
                    <span class="condition-desc">High blood pressure management</span>
                  </div>
                </label>
              </div>
            </div>

            <!-- Custom Condition Input -->
            <div class="custom-input-section">
              <button type="button" class="add-custom-button" id="add-condition-btn">
                + Add Custom
              </button>
              <div class="custom-input-group hidden" id="custom-condition-input-group">
                <input type="text" id="custom-condition-input" placeholder="Enter condition (e.g., Fibromyalgia, IBS, Diabetes)" maxlength="50">
                <button type="button" id="add-condition-submit">Add</button>
              </div>
              <div class="custom-chips" id="custom-conditions-list"></div>
            </div>
          </div>

          <!-- Allergen Selection -->
          <div class="form-section">
            <label class="form-label">Allergies/Sensitivities (Select all that apply)</label>
            <p class="form-helper">We'll alert you when detected</p>
            <div class="allergen-chips">
              <label class="allergen-chip">
                <input type="checkbox" name="allergen" value="peanuts">
                <span>ü•ú Peanuts</span>
              </label>
              <label class="allergen-chip">
                <input type="checkbox" name="allergen" value="tree nuts">
                <span>üå∞ Tree Nuts</span>
              </label>
              <label class="allergen-chip">
                <input type="checkbox" name="allergen" value="milk">
                <span>ü•õ Milk</span>
              </label>
              <label class="allergen-chip">
                <input type="checkbox" name="allergen" value="eggs">
                <span>ü•ö Eggs</span>
              </label>
              <label class="allergen-chip">
                <input type="checkbox" name="allergen" value="soy">
                <span>ü´ò Soy</span>
              </label>
              <label class="allergen-chip">
                <input type="checkbox" name="allergen" value="wheat">
                <span>üåæ Wheat</span>
              </label>
              <label class="allergen-chip">
                <input type="checkbox" name="allergen" value="fish">
                <span>üêü Fish</span>
              </label>
              <label class="allergen-chip">
                <input type="checkbox" name="allergen" value="shellfish">
                <span>ü¶ê Shellfish</span>
              </label>
              <label class="allergen-chip">
                <input type="checkbox" name="allergen" value="sesame">
                <span>üåª Sesame</span>
              </label>
              <label class="allergen-chip">
                <input type="checkbox" name="allergen" value="fragrance">
                <span>üå∏ Fragrance</span>
              </label>
              <label class="allergen-chip">
                <input type="checkbox" name="allergen" value="latex">
                <span>üß§ Latex</span>
              </label>
              <label class="allergen-chip">
                <input type="checkbox" name="allergen" value="nickel">
                <span>üî© Nickel</span>
              </label>
            </div>

            <!-- Custom Allergen Input -->
            <div class="custom-input-section">
              <button type="button" class="add-custom-button" id="add-allergen-btn">
                + Add Custom
              </button>
              <div class="custom-input-group hidden" id="custom-allergen-input-group">
                <input type="text" id="custom-allergen-input" placeholder="Enter allergen (e.g., Coconut, Sulfites, Corn)" maxlength="50">
                <button type="button" id="add-allergen-submit">Add</button>
              </div>
              <div class="custom-chips" id="custom-allergens-list"></div>
            </div>
          </div>

          <!-- Email Input -->
          <div class="form-section">
            <label class="form-label" for="email-input">Email Address <span class="required-indicator">*</span></label>
            <input
              type="email"
              id="email-input"
              class="email-input"
              placeholder="your.email@example.com"
              required
              autocomplete="email"
            >
            <p class="form-helper">Your email is saved locally on your device for personalized wellness insights.</p>

            <!-- Opt-In Checkbox -->
            <div class="opt-in-section">
              <label class="opt-in-checkbox">
                <input type="checkbox" id="email-opt-in" name="emailOptIn">
                <span class="checkbox-label">
                  üì¨ Share my email with Shop Well to receive:
                  <ul class="opt-in-benefits">
                    <li>Product safety alerts & recalls</li>
                    <li>New wellness feature updates</li>
                    <li>Personalized health tips (optional)</li>
                  </ul>
                </span>
              </label>
              <p class="privacy-note">
                üîí <strong>Privacy First:</strong> Your data stays local unless you opt in.
                <a href="#" id="privacy-policy-link" class="privacy-link">View Privacy Policy</a>
              </p>
            </div>
          </div>
        </div>

        <div class="step-actions">
          <button class="btn btn-secondary" id="prev-step-3">‚Üê Back</button>
          <button class="btn btn-primary btn-large" id="finish-setup">
            üéâ Start Shopping Smarter
          </button>
        </div>
      </div>
    </div>

    <!-- Success Celebration (hidden, shown after completion) -->
    <div class="celebration hidden" id="celebration">
      <div class="celebration-content">
        <div class="celebration-icon">üéâ</div>
        <h2>You're All Set!</h2>
        <p>Shop Well is ready to help you make safer shopping decisions.</p>
        <div class="celebration-note">
          Visit any Amazon or Walmart product page and click the Shop Well extension icon to get started!
        </div>
      </div>
    </div>
  </div>

  <script src="welcome.js"></script>
</body>
</html>
