<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Welcome to Shop Well</title>
  <link rel="stylesheet" href="welcome.css">
  
</head>
<body>
  <div class="welcome-container">
    <div class="welcome-header">
      <div class="welcome-logo">üõ°Ô∏è</div>
      <h1>Welcome to Shop Well</h1>
      <p>Your wellness-friendly shopping assistant for chronic conditions</p>
      <div class="version-badge">Version 0.1.0</div>
    </div>

    <div class="welcome-content">
      <div class="setup-progress">
        <div class="progress-step">
          <div class="step-circle active" id="step1-circle">1</div>
          <div class="step-label">Welcome</div>
        </div>
        <div class="progress-step">
          <div class="step-circle" id="step2-circle">2</div>
          <div class="step-label">Setup Chrome AI</div>
        </div>
        <div class="progress-step">
          <div class="step-circle" id="step3-circle">3</div>
          <div class="step-label">Configure Settings</div>
        </div>
        <div class="progress-step">
          <div class="step-circle" id="step4-circle">4</div>
          <div class="step-label">Try It Out</div>
        </div>
      </div>

      <!-- Step 1: Welcome -->
      <div class="step-content" id="step1-content">
        <h2 class="step-title">üéâ Installation Complete!</h2>
        <p class="step-description">
          Shop Well analyzes products on Amazon and Walmart to provide wellness-friendly suggestions for your chronic condition.
          Everything happens locally on your device - no data is ever sent to external servers.
        </p>

        <div class="feature-highlights">
          <div class="feature-card">
            <div class="feature-icon">ü§ñ</div>
            <h4>AI-Powered Analysis</h4>
            <p>Uses Chrome's Built-in AI for intelligent product insights</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üõ°Ô∏è</div>
            <p>100% private analysis with local AI processing</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">‚ö°</div>
            <h4>Instant Results</h4>
            <p>Press Ctrl+Shift+S (Cmd+Shift+S on Mac) on any product page for immediate analysis</p>
          </div>
        </div>
      </div>

      <!-- Step 2: Chrome AI Setup -->
      <div class="step-content hidden" id="step2-content">
        <h2 class="step-title">ü§ñ Enable Chrome Built-in AI</h2>
        <p class="step-description">
          For enhanced analysis, we need to enable Chrome's experimental AI features. This is a one-time setup that unlocks detailed wellness insights.
        </p>

        <div id="ai-status" class="ai-status-indicator ai-status-checking">
          <div class="status-spinner"></div>
          <span>Checking Chrome AI availability...</span>
        </div>

        <div class="setup-box">
          <h4>Setup Instructions</h4>
          <p>Follow these steps to enable Chrome's Built-in AI:</p>

          <div class="flags-setup-steps">
            <div class="setup-step">
              <div class="step-number">1</div>
              <div class="step-content">
                <p><strong>Open a new tab:</strong></p>
                <button class="open-tab-btn" id="open-new-tab">
                  üåê Open New Tab
                </button>
              </div>
            </div>

            <div class="setup-step">
              <div class="step-number">2</div>
              <div class="step-content">
                <p><strong>Copy this URL and paste it in the new tab:</strong></p>
                <div class="url-copy-container">
                  <input type="text" id="flags-url" value="chrome://flags" readonly>
                  <button class="copy-url-btn" id="copy-flags-url">Copy URL</button>
                </div>
                <p class="url-instruction">Click in the new tab's address bar, paste (Ctrl+V), and press Enter</p>
              </div>
            </div>

            <div class="setup-step">
              <div class="step-number">3</div>
              <div class="step-content">
                <p><strong>Enable these flags</strong> (click to copy each one):</p>
                <ul class="chrome-flags-list">
                  <li>
                    <span class="flag-name">optimization-guide-on-device-model</span>
                    <button class="copy-flag-btn" data-flag="optimization-guide-on-device-model">Copy</button>
                  </li>
                  <li>
                    <span class="flag-name">prompt-api-for-gemini-nano</span>
                    <button class="copy-flag-btn" data-flag="prompt-api-for-gemini-nano">Copy</button>
                  </li>
                  <li>
                    <span class="flag-name">summarization-api-for-gemini-nano</span>
                    <button class="copy-flag-btn" data-flag="summarization-api-for-gemini-nano">Copy</button>
                  </li>
                </ul>
                <div class="flag-enable-help">
                  <p><strong>How to enable each flag:</strong></p>
                  <ol>
                    <li>Search for the flag name in chrome://flags</li>
                    <li>Find the flag and click its dropdown menu</li>
                    <li>Select <strong>"Enabled"</strong> from the dropdown</li>
                    <li>Repeat for all three flags</li>
                  </ol>
                  <div class="dropdown-example">
                    üí° <strong>Tip:</strong> Look for a dropdown menu showing "Default" - click it and select "Enabled" instead.
                  </div>
                </div>
              </div>
            </div>

            <div class="setup-step">
              <div class="step-number">4</div>
              <div class="step-content">
                <p><strong>Restart Chrome completely</strong> and refresh this page to continue.</p>
                <div class="restart-note">
                  <strong>Important:</strong> Use Cmd+Q (Mac) or fully quit Chrome, don't just close windows. Chrome may need a few minutes to download the AI models after restart.
                </div>
              </div>
            </div>

            <div class="setup-step">
              <div class="step-number">5</div>
              <div class="step-content">
                <p><strong>Check model download status (if AI still not available):</strong></p>

                <div class="flag-enable-help">
                  <p><strong>Method 1: Enable Chrome Debug Pages</strong></p>
                  <ol>
                    <li>Go to: <code>chrome://chrome-urls/</code></li>
                    <li>Click "Enable debug pages" button</li>
                    <li>Then visit: <code>chrome://on-device-internals</code></li>
                    <li>Check "Model Status" tab for download progress</li>
                  </ol>
                </div>

                <div class="flag-enable-help">
                  <p><strong>Method 2: Quick Console Check</strong></p>
                  <ol>
                    <li>Press F12 to open Chrome DevTools</li>
                    <li>Click "Console" tab</li>
                    <li>Type: <code>await LanguageModel.availability()</code></li>
                    <li>Press Enter - should return "readily" when ready</li>
                  </ol>
                </div>

                <div class="flag-enable-help">
                  <p><strong>Method 3: Check Components</strong></p>
                  <ol>
                    <li>Visit: <code>chrome://components/</code></li>
                    <li>Find "Optimization Guide On Device Model"</li>
                    <li>Check for "Version" and "Updated" status</li>
                  </ol>
                </div>

                <div class="restart-note">
                  <p><strong>Requirements for Chrome AI:</strong></p>
                  <ul>
                    <li>22 GB of free storage space for AI model</li>
                    <li>GPU with more than 4 GB VRAM</li>
                    <li>Unmetered internet connection for download</li>
                    <li>Allow 2-3 minutes for model download after restart</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <button class="btn btn-secondary" id="recheck-ai">
          üîÑ Check AI Status Again
        </button>
      </div>

      <!-- Step 3: Settings -->
      <div class="step-content hidden" id="step3-content">
        <h2 class="step-title">‚öôÔ∏è Configure Your Settings</h2>
        <p class="step-description">
          Let's set up your health condition and allergen preferences so Shop Well can provide personalized analysis.
        </p>

        <div class="setup-box">
          <h4>What we'll configure:</h4>
          <ul style="margin-left: 20px; margin-top: 12px;">
            <li>Your primary health condition (POTS, ME/CFS, Celiac, or custom)</li>
            <li>Allergen monitoring (9 major allergens + custom ones)</li>
            <li>Auto-show preferences for the analysis panel</li>
          </ul>
        </div>

        <a href="../options/index.html" class="btn btn-primary">
          ‚öôÔ∏è Open Settings Page
        </a>
      </div>

      <!-- Step 4: Try It Out -->
      <div class="step-content hidden" id="step4-content">
        <h2 class="step-title">üéØ Ready to Shop Smarter!</h2>
        <p class="step-description">
          You're all set! Shop Well is now ready to help you make wellness-friendly shopping decisions.
        </p>

        <div class="setup-box">
          <h4>How to use Shop Well:</h4>
          <ol style="margin-left: 20px; margin-top: 12px;">
            <li>Visit any Amazon or Walmart product page</li>
            <li>Press <strong>Ctrl+Shift+S</strong> (or <strong>Cmd+Shift+S</strong> on Mac) to toggle the analysis panel</li>
            <li>Review the wellness insights based on your condition</li>
            <li>Make informed shopping decisions with confidence</li>
          </ol>
        </div>

        <div class="feature-highlights">
          <div class="feature-card">
            <div class="feature-icon">üõí</div>
            <h4>Try It Now</h4>
            <p>Visit a product page and press Ctrl+Shift+S (Cmd+Shift+S on Mac)</p>
            <a href="https://amazon.com" class="demo-link" target="_blank">
              Visit Amazon ‚Üí
            </a>
          </div>
          <div class="feature-card">
            <div class="feature-icon">‚öôÔ∏è</div>
            <h4>Adjust Settings</h4>
            <p>Update your conditions or allergies anytime</p>
            <a href="../options/index.html" class="demo-link">
              Open Settings ‚Üí
            </a>
          </div>
        </div>
      </div>

      <div class="welcome-actions">
        <button class="btn btn-secondary" id="prev-btn" style="display: none;">
          ‚Üê Previous
        </button>
        <button class="btn btn-primary" id="next-btn">
          Next ‚Üí
        </button>
        <button class="btn btn-primary hidden" id="finish-btn">
          üéâ Start Shopping Smarter
        </button>
      </div>
    </div>
  </div>

  <script src="welcome.js"></script>
</body>
</html>