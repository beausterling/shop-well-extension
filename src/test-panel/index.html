<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop Well - UI Test Panel</title>
  <link rel="stylesheet" href="design-tokens.css">
  <link rel="stylesheet" href="test-panel.css">
</head>
<body>
  <div id="test-panel">
    <!-- Test Controls Header -->
    <div class="test-controls">
      <h3>ğŸ§ª UI Test Panel</h3>
      <p class="test-note">Toggle UI states to preview components</p>

      <div class="test-buttons">
        <button class="test-btn" data-state="welcome">Welcome</button>
        <button class="test-btn" data-state="loading">Loading</button>
        <button class="test-btn" data-state="setup">Setup</button>
        <button class="test-btn" data-state="analysis">Analysis</button>
        <button class="test-btn" data-state="error">Error</button>
      </div>
    </div>

    <!-- Main Panel Container (same structure as production) -->
    <div id="shop-well-sidepanel">
      <!-- Header -->
      <header class="shop-well-header">
        <div class="shop-well-logo">
          <span class="shop-well-icon">ğŸŒ¿</span>
          <span class="shop-well-title">Shop Well</span>
        </div>
      </header>

      <!-- Main Content Area -->
      <main class="shop-well-content">

        <!-- Loading State -->
        <div class="shop-well-loading hidden">
          <div class="loading-spinner"></div>
          <p>Analyzing product with Chrome AI...</p>
          <small>This may take a few seconds</small>
        </div>

        <!-- Setup Instructions State -->
        <div class="shop-well-setup hidden">
          <div class="setup-icon">âš™ï¸</div>
          <h2>Chrome AI Setup Required</h2>
          <p>Enable Chrome's Built-in AI for enhanced wellness analysis:</p>
          <ol>
            <li>
              <strong>Enable AI Flags:</strong>
              <ul>
                <li>
                  <button class="copy-link" data-url="chrome://flags/#optimization-guide-on-device-model" title="Copy to clipboard">
                    optimization-guide-on-device-model
                  </button>
                </li>
                <li>
                  <button class="copy-link" data-url="chrome://flags/#prompt-api-for-gemini-nano" title="Copy to clipboard">
                    prompt-api-for-gemini-nano
                  </button>
                </li>
                <li>
                  <button class="copy-link" data-url="chrome://flags/#summarization-api-for-gemini-nano" title="Copy to clipboard">
                    summarization-api-for-gemini-nano
                  </button>
                </li>
              </ul>
            </li>
            <li><strong>Restart Chrome</strong> completely (Cmd+Q on Mac, fully quit on Windows)</li>
            <li><strong>Wait 2-3 minutes</strong> for AI models to download</li>
            <li><strong>Return here</strong> and click the button below</li>
          </ol>

          <button class="retry-button" id="checkAIButton">
            Check AI Availability
          </button>

          <div class="setup-note">
            <p><strong>Requirements:</strong></p>
            <ul>
              <li>Chrome 128+ (Stable)</li>
              <li>22 GB free storage for AI models</li>
              <li>4+ GB VRAM (GPU memory)</li>
            </ul>
          </div>
        </div>

        <!-- AI Analysis Results State -->
        <div class="shop-well-analysis hidden">
          <div class="analysis-header">
            <div class="verdict-badge verdict-ideal">âœ… Ideal</div>
            <div class="condition-info">For POTS Management</div>
          </div>

          <div class="product-info">
            <h3 class="product-title">Test Product Name - Organic Electrolyte Mix</h3>
            <div class="product-meta">
              <span class="product-price">$24.99</span>
              <span class="product-rating">â˜…â˜…â˜…â˜…â˜† 4.5</span>
            </div>
          </div>

          <div class="analysis-content">
            <!-- Key Insights -->
            <section class="key-insights">
              <h4>ğŸ’¡ Key Insights</h4>
              <ul class="insights-list">
                <li>ğŸŒ¿ High sodium content supports blood volume</li>
                <li>ğŸŒ¿ Electrolyte balance ideal for hydration</li>
                <li>ğŸŒ¿ No artificial sweeteners or additives</li>
                <li>ğŸŒ¿ Organic certification ensures quality</li>
              </ul>
            </section>

            <!-- Allergen Alerts -->
            <section class="allergen-alerts">
              <h4>ğŸš¨ Allergen Alert</h4>
              <div class="alert-content">
                <p><strong>Contains milk</strong> - This is in your allergen list</p>
                <p class="alert-warning">Always verify ingredients before consuming</p>
              </div>
            </section>

            <!-- Important Caveat -->
            <section class="important-caveat">
              <h4>âš ï¸ Important</h4>
              <div class="caveat-content">
                <p>Limited data from search results. Click product for full ingredient analysis.</p>
              </div>
            </section>
          </div>

          <div class="analysis-footer">
            <div class="confidence-indicator">
              <span class="confidence-label">Analysis Confidence:</span>
              <span class="confidence-value confidence-high">High</span>
            </div>
            <button class="refresh-button" id="refreshAnalysis" title="Re-analyze product">
              <span>ğŸ”„</span> Refresh Analysis
            </button>
          </div>
        </div>

        <!-- Error State -->
        <div class="shop-well-error hidden" role="alert">
          <div class="error-icon">âš ï¸</div>
          <h2>Analysis Failed</h2>
          <p class="error-message">Unable to extract product data. Please make sure you're on a product page.</p>
          <button class="retry-button" id="retryAnalysis">Try Again</button>
        </div>

        <!-- Welcome State (shown by default) -->
        <div class="shop-well-welcome">
          <div class="welcome-icon">ğŸŒ¿</div>
          <h2>Welcome to Shop Well</h2>
          <p>Your wellness-friendly shopping companion!</p>

          <div class="welcome-instructions">
            <p><strong>To get started:</strong></p>
            <ol>
              <li>Visit an Amazon or Walmart product page</li>
              <li>Press <kbd>âŒ¥â‡§W</kbd> (Mac) or <kbd>Alt+Shift+W</kbd> (Windows/Linux)</li>
              <li>Get instant wellness analysis powered by Chrome AI</li>
            </ol>
          </div>

          <div class="welcome-features">
            <h3>Features:</h3>
            <ul>
              <li>âœ… AI-powered ingredient analysis</li>
              <li>âœ… Personalized wellness recommendations</li>
              <li>âœ… Allergen detection and warnings</li>
              <li>âœ… 100% private, on-device processing</li>
            </ul>
          </div>

          <div class="test-panel-notice">
            <p>ğŸ§ª <strong>Test Mode Active</strong></p>
            <p>This is the UI test panel. Use the buttons above to preview different states.</p>
          </div>
        </div>

      </main>

      <!-- Footer -->
      <footer class="shop-well-footer">
        <p class="disclaimer">
          <small>â„¹ï¸ Informational only - not medical advice. Always verify ingredients yourself.</small>
        </p>
        <p class="ai-badge">
          <small>âš¡ Powered by Chrome Built-in AI (Gemini Nano)</small>
        </p>
      </footer>
    </div>
  </div>

  <script src="test-panel.js"></script>
</body>
</html>
