<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Shop Well Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <!-- Header -->
  <header class="options-header">
    <div class="options-logo">
      <span class="options-title">âš™ï¸ Profile Settings</span>
    </div>
  </header>

  <div class="container">
    <p class="greeting" id="greeting">Hello!</p>

    <div class="form-group" id="name-field-group">
      <label for="first-name">What is your name?</label>
      <input type="text" id="first-name" class="custom-input"
             placeholder="Your first name" maxlength="30" autocomplete="given-name">
    </div>

    <div class="form-group">
      <label for="language-preference">Analysis Language:</label>
      <select id="language-preference">
        <option value="auto">ğŸŒ Auto-detect from browser</option>
        <option value="en">ğŸ‡ºğŸ‡¸ English</option>
        <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
        <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
        <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
        <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
      </select>
      <p style="font-size: 13px; color: #666; margin-top: 8px;">
        Choose the language for wellness analysis. Auto-detect uses your browser's language setting.
      </p>
    </div>

    <div class="form-group">
      <label>Chronic Conditions:</label>
      <div class="condition-grid">
        <div class="condition-item">
          <input type="checkbox" id="condition-pots" name="condition" value="POTS">
          <label for="condition-pots">POTS</label>
        </div>
        <div class="condition-item">
          <input type="checkbox" id="condition-mecfs" name="condition" value="ME/CFS">
          <label for="condition-mecfs">ME/CFS</label>
        </div>
        <div class="condition-item">
          <input type="checkbox" id="condition-celiac" name="condition" value="Celiac Disease">
          <label for="condition-celiac">Celiac Disease</label>
        </div>
        <div class="condition-item">
          <input type="checkbox" id="condition-copd" name="condition" value="COPD">
          <label for="condition-copd">COPD</label>
        </div>
        <div class="condition-item">
          <input type="checkbox" id="condition-arthritis" name="condition" value="Arthritis">
          <label for="condition-arthritis">Arthritis</label>
        </div>
        <div class="condition-item">
          <input type="checkbox" id="condition-hypertension" name="condition" value="Hypertension">
          <label for="condition-hypertension">Hypertension</label>
        </div>
      </div>

      <!-- Custom Condition Input -->
      <div class="custom-condition-section">
        <button type="button" class="add-custom-button" id="add-condition-btn">
          + Add Custom
        </button>
        <div id="custom-condition-group" class="custom-input-group hidden">
          <input type="text" id="custom-condition" class="custom-input"
                 placeholder="Enter your condition (e.g., IBS, Fibromyalgia, Diabetes)"
                 maxlength="100">
          <button type="button" id="add-condition-submit" class="add-button">Add</button>
        </div>
        <div id="custom-conditions-list" class="custom-chips"></div>
      </div>
    </div>

    <div class="form-group">
      <label>Allergies/Sensitivities:</label>
      <div class="allergen-grid">
        <div class="allergen-item">
          <input type="checkbox" id="allergy-peanuts" value="peanuts">
          <label for="allergy-peanuts">Peanuts</label>
        </div>
        <div class="allergen-item">
          <input type="checkbox" id="allergy-tree-nuts" value="tree-nuts">
          <label for="allergy-tree-nuts">Tree Nuts</label>
        </div>
        <div class="allergen-item">
          <input type="checkbox" id="allergy-milk" value="milk">
          <label for="allergy-milk">Milk/Dairy</label>
        </div>
        <div class="allergen-item">
          <input type="checkbox" id="allergy-eggs" value="eggs">
          <label for="allergy-eggs">Eggs</label>
        </div>
        <div class="allergen-item">
          <input type="checkbox" id="allergy-wheat" value="wheat">
          <label for="allergy-wheat">Wheat/Gluten</label>
        </div>
        <div class="allergen-item">
          <input type="checkbox" id="allergy-soy" value="soy">
          <label for="allergy-soy">Soy</label>
        </div>
        <div class="allergen-item">
          <input type="checkbox" id="allergy-fish" value="fish">
          <label for="allergy-fish">Fish</label>
        </div>
        <div class="allergen-item">
          <input type="checkbox" id="allergy-shellfish" value="shellfish">
          <label for="allergy-shellfish">Shellfish</label>
        </div>
        <div class="allergen-item">
          <input type="checkbox" id="allergy-sesame" value="sesame">
          <label for="allergy-sesame">Sesame</label>
        </div>
        <div class="allergen-item">
          <input type="checkbox" id="allergy-fragrance" value="fragrance">
          <label for="allergy-fragrance">Fragrance</label>
        </div>
        <div class="allergen-item">
          <input type="checkbox" id="allergy-latex" value="latex">
          <label for="allergy-latex">Latex</label>
        </div>
        <div class="allergen-item">
          <input type="checkbox" id="allergy-nickel" value="nickel">
          <label for="allergy-nickel">Nickel</label>
        </div>
      </div>

      <div class="form-group">
        <label>Add Custom Allergens:</label>
        <div class="custom-input-group">
          <input type="text" id="custom-allergen-input" class="custom-input"
                 placeholder="Enter allergen (e.g., coconut, sulfites, corn)"
                 maxlength="50">
          <button type="button" id="add-allergen" class="add-button">Add</button>
        </div>

        <div id="custom-allergen-list" class="custom-allergen-list"></div>

        <div class="allergen-warning">
          âš ï¸ <strong>Important:</strong> Shop Well will flag products containing these allergens, but always verify ingredients yourself before consuming any product.
        </div>
      </div>
    </div>

    <div class="form-group">
      <label>Email & Privacy Settings</label>
      <div class="email-opt-in-section">
        <!-- Email input field (shown only if user hasn't provided email) -->
        <div class="email-input-group" id="email-input-group">
          <label for="email-input">Email Address:</label>
          <input type="email" id="email-input" class="custom-input"
                 placeholder="your.email@example.com" maxlength="100" autocomplete="email">
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="email-opt-in">
          <label for="email-opt-in">
            ğŸ“¬ Share my email and health data with Shop Well to receive product safety alerts, feature updates, and wellness tips
          </label>
        </div>
        <p style="font-size: 13px; color: #666; margin-top: 12px;">
          ğŸ”’ <strong>Privacy First:</strong> Your data is stored locally on your device. Email and data sharing is optional and helps us provide personalized updates. We do not share or market your data to any third parties.
          <a href="https://shopwell-extension.com/privacy-policy" target="_blank" style="color: #3b82f6; text-decoration: underline;">View Privacy Policy</a>
        </p>
      </div>
    </div>

    <div class="form-group">
      <button id="save">Save Settings</button>
      <button id="close" class="secondary">Close</button>
    </div>

    <!-- Profile Building Status -->
    <div id="profile-building-status" class="profile-building-status hidden">
      <div class="profile-spinner"></div>
      <div class="profile-building-text">
        <p class="profile-building-title">Building your health profile...</p>
        <small class="profile-building-subtitle">This usually takes 10-20 seconds</small>
      </div>
    </div>

    <div id="status" class="status"></div>
  </div>

  <script src="options.js"></script>
</body>
</html>
